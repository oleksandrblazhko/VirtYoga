# Опис суглобів людини з використанням матриць

## Вступ
У рамках розробки програми "Віртуальна Йога", яка використовує технології розпізнавання скелету людини за допомогою бібліотеки Mediapipe, важливим є математичне представлення положення суглобів. Цей документ пропонує кілька варіантів опису суглобів людини з використанням матриць, що дозволить застосовувати методи вищої математики для аналізу та порівняння поз йоги.

## Варіант 1: Матриця координат суглобів

### Опис
Кожен суглоб можна представити як точку в тривимірному просторі з координатами (x, y, z). Для 33 суглобів скелету, відповідно до бібліотеки Mediapipe, можна створити матрицю 33×3, де кожен рядок представляє один суглоб:

```
J = [x₁  y₁  z₁ ]
    [x₂  y₂  z₂ ]
    [x₃  y₃  z₃ ]
    [⋮   ⋮   ⋮  ]
    [x₃₃ y₃₃ z₃₃]
```

де (xi, yi, zi) - координати i-го суглоба.

### Переваги
- Просте представлення положення всіх суглобів
- Можливість виконання операцій над всіма суглобами одночасно
- Легке порівняння з еталонними позами

### Недоліки
- Не враховує орієнтацію тіла
- Не містить інформації про кути між суглобами

## Варіант 2: Матриця відстаней між суглобами

### Опис
Можна створити квадратну матрицю 33×33, де кожен елемент aᵢⱼ представляє відстань між i-м і j-м суглобами:

```
D = [d₁₁  d₁₂  d₁₃  ... d₁₃₃]
    [d₂₁  d₂₂  d₂₃  ... d₂₃₃]
    [d₃₁  d₃₂  d₃₃  ... d₃₃₃]
    [ ⋮    ⋮    ⋮   ⋱   ⋮  ]
    [d₃₃₁ d₃₃₂ d₃₃₃ ... d₃₃₃₃]
```

де dᵢⱼ = √[(xi-xj)² + (yi-yj)² + (zi-zj)²]

### Переваги
- Відображає просторові відношення між усіма суглобами
- Може використовуватися для аналізу пропорцій тіла
- Інваріантна до обертання тіла

### Недоліки
- Великий розмір матриці (33×33 = 1089 елементів)
- Може бути обчислювально витратною

## Варіант 3: Матриця кутів між суглобами

### Опис
Можна створити матрицю, що представляє кути між парами суглобів відносно третіх суглобів (кути в трикутниках, утворених суглобами). Наприклад, для кожної трійки суглобів (i, j, k), можна обчислити кут ∠jik:

```
A = [α₁₁₂ α₁₁₃ α₁₁₄ ... α₁₂₃₃]
    [α₂₁₁ α₂₁₂ α₂₁₃ ... α₂₂₃₃]
    [α₃₁₁ α₃₁₂ α₃₁₃ ... α₃₂₃₃]
    [ ⋮    ⋮    ⋮   ⋱    ⋮  ]
    [α₃₃₁₁ α₃₃₁₂ α₃₃₁₃ ... α₃₃₂₃₂]
```

де αᵢⱼₖ - кут при суглобі j між суглобами i та k.

### Переваги
- Відображає геометрію тіла в термінах кутів
- Допомагає аналізувати правильність поз
- Може бути менш чутливою до масштабу тіла

### Недоліки
- Складні обчислення
- Вимагає визначення значущих трійок суглобів

### Докладний аналіз переваг та недоліків

#### Переваги:
1. **Геометрична інформація**: Матриця кутів надає інформацію про геометрію тіла в термінах кутів, що є важливим для аналізу правильності йога-поз. Кути між суглобами допомагають визначити, чи виконується поза згідно з анатомічними вимогами.

2. **Чутливість до положення тіла**: Цей варіант добре відображає відносне положення частин тіла один до одного, що дозволяє точно аналізувати правильність виконання пози. Наприклад, кут між тазом, коліном і щиколоткою показує, чи зігнуте коліно правильно.

3. **Менша залежність від масштабу**: На відміну від варіанта 1 (координати) і частково варіанта 2 (відстані), матриця кутів менше залежить від розмірів тіла користувача, що робить її більш універсальною для різних людей.

#### Недоліки:
1. **Складні обчислення**: Обчислення кутів між трійками суглобів вимагає більше обчислювальних ресурсів порівняно з варіантами 1 (просто координати) і 2 (відстані між парами суглобів).

2. **Вимога до визначення значущих трійок**: Необхідно визначити, які трійки суглобів є найважливішими для аналізу кожної конкретної пози, що вимагає глибоких знань анатомії та практики йоги.

3. **Чутливість до помилок визначення суглобів**: Кути є більш чутливими до помилок у визначенні положення суглобів, ніж відстані або координати, оскільки навіть невеликі похибки в положенні одного суглоба можуть значно вплинути на значення кута.

#### Порівняльний аналіз із іншими варіантами:

##### Переваги у порівнянні з іншими варіантами:
1. **Анатомічна точність**: Порівняно з варіантами 1 (координати) і 2 (відстані), матриця кутів краще відображає анатомічні відносини між частинами тіла, що важливо для аналізу правильності йога-поз.

2. **Універсальність**: У порівнянні з варіантом 1 (координати), матриця кутів менше залежить від абсолютного положення тіла у просторі, що робить її більш придатною для порівняння поз різних людей.

3. **Інформативність для аналізу пози**: На відміну від варіанта 2 (відстані), який показує лише просторові відношення, матриця кутів надає інформацію про геометричні властивості пози, що важливо для визначення правильності виконання.

##### Недоліки у порівнянні з іншими варіантами:
1. **Обчислювальна складність**: Порівняно з варіантами 1 і 2, матриця кутів вимагає більше обчислювальних ресурсів для обчислення і аналізу.

2. **Чутливість до шуму**: У порівнянні з варіантами 1 і 2, матриця кутів більше чутлива до помилок у визначенні положення суглобів, що може призводити до неточностей у аналізі.

3. **Складність інтерпретації**: Порівняно з варіантом 1 (координати), який легко візуалізувати, матриця кутів менш інтуїтивно зрозуміла для інтерпретації без додаткових обчислень.

## Варіант 4: Комбінована матриця для аналізу пози

### Опис
Для аналізу йога-поз можна використовувати комбінований підхід, що включає:

1. Матрицю координат J (33×3) для представлення положення
2. Виділені підматриці для важливих груп суглобів (наприклад, для аналізу пози "воїна" можна виділити суглоби ноги та тулуба)
3. Матриці трансформацій для нормалізації положення

Приклад:
```
J = [x₁  y₁  z₁ ] ← ніс (0)
    [x₂  y₂  z₂ ] ← ліве око (внутрішнє) (1)
    [⋮   ⋮   ⋮  ]
    [x₁₁ y₁₁ z₁₁] ← ліве плече (11)
    [x₁₂ y₁₂ z₁₂] ← праве плече (12)
    [⋮   ⋮   ⋮  ]
    [x₃₂ y₃₂ z₃₂] ← правий палець ноги (32)
```

Для аналізу певної пози можна використовувати підматриці:
```
J_руки = [x₁₃ y₁₃ z₁₃] ← лікоть (13)
         [x₁₄ y₁₄ z₁₄] ← правий лікоть (14)
         [x₁₅ y₁₅ z₁₅] ← лівий зап'ясток (15)
         [x₁₆ y₁₆ z₁₆] ← правий зап'ясток (16)
```

### Переваги
- Гнучкий підхід для різних типів аналізу
- Можливість зосередження на конкретних частинах тіла
- Легка інтеграція з алгоритмами машинного навчання

### Недоліки
- Потребує визначення специфічних для задачі підматриць
- Може бути складною для початківців

### Докладний аналіз переваг та недоліків

#### Переваги:
1. **Гнучкість підходу**: Комбінована матриця дозволяє використовувати різні представлення даних (координати, відстані, кути) одночасно, що забезпечує більш повне представлення пози. Це дозволяє виконувати різноманітні типи аналізу на одному наборі даних.

2. **Зосередження на конкретних частинах тіла**: Можливість виділення підматриць для аналізу конкретних частин тіла дозволяє більш точно оцінювати правильність виконання окремих елементів пози. Наприклад, для аналізу положення рук у позі "воїна" можна використовувати лише підматрицю, що містить суглоби рук.

3. **Інтеграція з алгоритмами машинного навчання**: Комбінована матриця може бути використана як вхідні дані для навчання моделей машинного навчання для класифікації поз, виявлення помилок у виконанні або оцінки прогресу користувача.

#### Недоліки:
1. **Потреба у визначенні специфічних підматриць**: Для кожної йога-пози необхідно визначити, які саме суглоби є найважливішими для аналізу. Це вимагає глибоких знань анатомії та практики йоги, а також експериментування для визначення оптимального набору параметрів.

2. **Складність для початківців**: Комбінований підхід вимагає розуміння кількох різних математичних концепцій (матриці координат, відстаней, кутів), що може бути важким для тих, хто тільки починає вивчати застосування математики в йога-додатках.

#### Порівняльний аналіз із іншими варіантами:

##### Переваги у порівнянні з іншими варіантами:
1. **Комплексність аналізу**: На відміну від варіантів 1-3, які використовують лише один тип представлення (координати, відстані або кути), комбінована матриця дозволяє одночасно аналізувати кілька аспектів пози. Це забезпечує більш повну картину порівняно з варіантами 1-3, кожен з яких дає лише частину інформації.

2. **Адаптивність до різних задач**: У порівнянні з варіантами 1-3, комбінований підхід дозволяє вибирати найбільш актуальні компоненти для конкретної задачі аналізу. Наприклад, для аналізу балансу можна зосередитися на координатах, а для аналізу правильності положення - на кутах.

3. **Підвищена точність аналізу**: Порівняно з використанням лише одного типу матриці (варіанти 1-3), комбінований підхід дозволяє уникнути помилок, які можуть виникнути при аналізі лише за одним критерієм. Наприклад, варіант 1 (координати) може не враховувати пропорції тіла, які добре враховуються у варіанті 2 (відстані).

##### Недоліки у порівнянні з іншими варіантами:
1. **Обчислювальна складність**: Комбінований підхід (варіант 4) вимагає більше обчислювальних ресурсів порівняно з варіантами 1-3, оскільки необхідно обробляти кілька типів матриць одночасно.

2. **Складність реалізації**: У порівнянні з простішими варіантами 1-2, варіант 4 вимагає більш глибоких знань у сфері обробки даних і математичного моделювання.

3. **Вимоги до об'єму даних**: Порівняно з варіантами 1-3, комбінований підхід може вимагати більше даних для навчання моделей машинного навчання, що може бути проблемою при обмежених ресурсах.

## Приклади для Йога-вправ

### Поза Воїна I (Warrior I)

#### Текстовий опис вправи:
Поза Воїна I - це класична поза йоги, в якій:
- Ноги широко розставлені, одна нога впереді іншої
- Переднє коліно зігнуте під кутом приблизно 90 градусів
- Задня нога витягнута назад, п'ятка піднята
- Руки підняті догори, з'єднані або паралельні
- Грудна клітка відкрита, погляд направлений вгору або на руки
- Тулуб витягнутий вгору

#### Матричний опис для варіанта 1 (Матриця координат суглобів):
Для аналізу цієї пози важливими є наступні суглоби:
- Ноги: таз (ліве і праве стегно), коліна, кісточки
- Руки: плечі, лікті, зап'ястя, пальці
- Тулуб: хребет, груди, голова

Приклад скороченої матриці J для важливих суглобів:
```
J_вояк_I = [x₁₁  y₁₁  z₁₁ ] ← ліве плече (11)
           [x₁₂  y₁₂  z₁₂ ] ← праве плече (12)
           [x₁₃  y₁₃  z₁₃ ] ← лівий лікоть (13)
           [x₁₄  y₁₄  z₁₄ ] ← правий лікоть (14)
           [x₁₅  y₁₅  z₁₅ ] ← ліве зап'ястя (15)
           [x₁₆  y₁₆  z₁₆ ] ← праве зап'ястя (16)
           [x₂₃  y₂₃  z₂₃ ] ← ліве коліно (23)
           [x₂₄  y₂₄  z₂₄ ] ← праве коліно (24)
           [x₂₅  y₂₅  z₂₅ ] ← лівий палець ноги (25)
           [x₂₆  y₂₆  z₂₆ ] ← правий палець ноги (26)
           [x₂₇  y₂₇  z₂₇ ] ← ліва п'ятка (27)
           [x₂₈  y₂₈  z₂₈ ] ← права п'ятка (28)
```

#### Матричний опис для варіанта 2 (Матриця відстаней між суглобами):
Для пози Воїна I важливими є відстані між:
- Плечима та руками (для аналізу симетрії підняття рук)
- Колінами та ступнями (для аналізу ширини кроку)
- Верхньою частиною тіла та нижньою (для аналізу вирівнювання)

Приклад часткової матриці відстаней:
```
D_вояк_I = [d₁₁,₁₂  d₁₁,₁₃  d₁₁,₁₄  d₁₁,₁₅  d₁₁,₁₆  ...] ← відстані від лівого плеча
           [d₁₂,₁₁  d₁₂,₁₃  d₁₂,₁₄  d₁₂,₁₅  d₁₂,₁₆  ...] ← відстані від правого плеча
           [d₂₃,₂₄  d₂₃,₂₅  d₂₃,₂₆  d₂₃,₂₇  d₂₃,₂₈  ...] ← відстані між нижніми суглобами
           [d₂₄,₂₃  d₂₄,₂₅  d₂₄,₂₆  d₂₄,₂₇  d₂₄,₂₈  ...]
           [...     ...     ...     ...     ...     ...]
```

де:
- d₁₁,₁₂ - відстань між лівим плечем (11) і правим плечем (12)
- d₁₁,₁₃ - відстань між лівим плечем (11) і лівим лікотьом (13)
- d₁₂,₁₄ - відстань між правим плечем (12) і правим лікотьом (14)
- d₂₃,₂₄ - відстань між лівим коліном (23) і правим коліном (24)
- d₂₃,₂₅ - відстань між лівим коліном (23) і лівим пальцем ноги (25)

#### Матричний опис для варіанта 3 (Матриця кутів між суглобами):
Для пози Воїна I важливими є кути між:
- Плече-лікоть-зап'ястя (для аналізу положення рук)
- Таз-коліно-щиколотка (для аналізу положення передньої ноги)
- Таз-щиколотка-палець ноги (для аналізу положення задньої ноги)

Приклад часткової матриці кутів:
```
A_вояк_I = [α₁₁,₁₃,₁₅  α₁₂,₁₄,₁₆  ...] ← кути між плечем-лікоть-зап'ястя
           [α₂₃,₂₅,₂₇  α₂₄,₂₆,₂₈  ...] ← кути між тазом-коліном-щиколоткою
           [...        ...        ...]
```

де:
- α₁₁,₁₃,₁₅ - кут при лівому лікті (13) між лівим плечем (11) та лівим зап'ястям (15)
- α₁₂,₁₄,₁₆ - кут при правому лікті (14) між правим плечем (12) та правим зап'ястям (16)
- α₂₃,₂₅,₂₇ - кут при лівому коліні (23) між лівим пальцем ноги (25) та лівою п'яткою (27)
- α₂₄,₂₆,₂₈ - кут при правому коліні (24) між правим пальцем ноги (26) та правою п'яткою (28)

де αᵢ,ⱼ,ₖ - кут при суглобі j між суглобами i та k.

#### Приклади реальних значень кутів для правильної пози:
Для правильної виконаної пози Воїна I очікувані значення кутів можуть бути:
- α₁₁,₁₃,₁₅ ≈ 180° (лікоть повністю розгиняється при піднятті руки догори)
- α₁₂,₁₄,₁₆ ≈ 180° (правий лікоть повністю розгиняється при піднятті руки догори)
- α₂₃,₂₅,₂₇ ≈ 90° (ліве коліно зігнуте під прямим кутом)
- α₂₄,₂₆,₂₈ ≈ 180° (задня права нога витягнута прямо)

#### Приклад матриці кутів із реальними значеннями для пози Воїна I:
```
A_вояк_I = [180°  180°  180°  180°  90°   180°]
           [180°  180°  180°  180°  180°  180°]
           [180°  180°  180°  180°  180°  180°]
           [180°  180°  180°  180°  180°  180°]
           [90°   180°  180°  180°  180°  180°]
           [180°  180°  180°  180°  180°  180°]
```
де наведені значення є приблизними для правильної виконаної пози, а сама матриця містить кути між усіма можливими трійками суглобів. Зауважте, що повна матриця містила б 33³ = 35937 елементів (якщо враховувати всі можливі комбінації трійок суглобів), тому тут наведено лише фрагмент для ілюстрації структури.

#### Комбінована матриця для аналізу пози:
Для комплексного аналізу пози Воїна I можна створити комбіновану матрицю, що містить координати суглобів, відстані та кути:
```
C_вояк_I = [J_вояк_I    D_вояк_I    A_вояк_I]
```
де:
- J_вояк_I - матриця координат (33×3)
- D_вояк_I - матриця відстаней (33×33)
- A_вояк_I - матриця кутів (33×33×33) - спрощено для ілюстрації

Для аналізу конкретних аспектів пози можна використовувати підматриці, що містять лише необхідні параметри:
```
C_вояк_I_руки = [J_руки    D_руки    A_руки]
```
де J_руки, D_руки, A_руки - підматриці, що містять параметри лише для суглобів рук (плечі, лікті, зап'ястя).

#### Приклади підматриць:
Підматриця для рук (ліве плече, праве плече, лівий лікоть, правий лікоть, ліве зап'ястя, праве зап'ястя):
```
J_руки = [x₁₁  y₁₁  z₁₁] ← ліве плече (11)
         [x₁₂  y₁₂  z₁₂] ← праве плече (12)
         [x₁₃  y₁₃  z₁₃] ← лівий лікоть (13)
         [x₁₄  y₁₄  z₁₄] ← правий лікоть (14)
         [x₁₅  y₁₅  z₁₅] ← ліве зап'ястя (15)
         [x₁₆  y₁₆  z₁₆] ← праве зап'ястя (16)

D_руки = [d₁₁,₁₂  d₁₁,₁₃  d₁₁,₁₄  d₁₁,₁₅  d₁₁,₁₆] ← відстані від лівого плеча
         [d₁₂,₁₁  d₁₂,₁₃  d₁₂,₁₄  d₁₂,₁₅  d₁₂,₁₆] ← відстані від правого плеча
         [d₁₃,₁₁  d₁₃,₁₂  d₁₃,₁₄  d₁₃,₁₅  d₁₃,₁₆] ← відстані від лівого ліктя
         [d₁₄,₁₁  d₁₄,₁₂  d₁₄,₁₃  d₁₄,₁₅  d₁₄,₁₆] ← відстані від правого ліктя
         [d₁₅,₁₁  d₁₅,₁₂  d₁₅,₁₃  d₁₅,₁₄  d₁₅,₁₆] ← відстані від лівого зап'ястя
         [d₁₆,₁₁  d₁₆,₁₂  d₁₆,₁₃  d₁₆,₁₄  d₁₆,₁₅] ← відстані від правого зап'ястя

A_руки = [α₁₁,₁₃,₁₅  α₁₂,₁₄,₁₆  ...] ← кути при ліктях
         [α₁₂,₁₄,₁₆  α₁₁,₁₃,₁₅  ...] ← кути при плечах
         [...        ...        ...]
```

### Поза Воїна II (Warrior II)

#### Текстовий опис вправи:
Поза Воїна II - це потужна поза йоги, в якій:
- Ноги широко розставлені, одна нога впередін іншої
- Переднє коліно зігнуте під кутом приблизно 90 градусів
- Задня нога витягнута прямо назад
- Руки розведені в сторони, паралельно підлозі
- Погляд направлений на передню руку
- Тулуб паралельний до підлоги

#### Матричний опис для варіанта 1 (Матриця координат суглобів):
```
J_вояк_II = [x₁₁  y₁₁  z₁₁ ] ← ліве плече (11)
            [x₁₂  y₁₂  z₁₂ ] ← праве плече (12)
            [x₁₃  y₁₃  z₁₃ ] ← лівий лікоть (13)
            [x₁₄  y₁₄  z₁₄ ] ← правий лікоть (14)
            [x₁₅  y₁₅  z₁₅ ] ← ліве зап'ястя (15)
            [x₁₆  y₁₆  z₁₆ ] ← праве зап'ястя (16)
            [x₂₃  y₂₃  z₂₃ ] ← ліве коліно (23)
            [x₂₄  y₂₄  z₂₄ ] ← праве коліно (24)
            [x₂₅  y₂₅  z₂₅ ] ← лівий палець ноги (25)
            [x₂₆  y₂₆  z₂₆ ] ← правий палець ноги (26)
            [x₂₇  y₂₇  z₂₇ ] ← ліва п'ятка (27)
            [x₂₈  y₂₈  z₂₈ ] ← права п'ятка (28)
```

#### Матричний опис для варіанта 2 (Матриця відстаней між суглобами):
Для пози Воїна II важливими є відстані між:
- Розведеними руками (для аналізу симетрії)
- Переднім коліном та ступнею (для аналізу кута)
- Плечем та переднім коліном (для аналізу вирівнювання)

Приклад часткової матриці відстаней:
```
D_вояк_II = [d₁₁,₁₂  d₁₁,₁₃  d₁₁,₁₄  d₁₁,₁₅  d₁₁,₁₆  ...] ← відстані від лівого плеча
            [d₁₂,₁₁  d₁₂,₁₃  d₁₂,₁₄  d₁₂,₁₅  d₁₂,₁₆  ...] ← відстані від правого плеча
            [d₁₃,₁₄  d₁₃,₁₅  d₁₃,₁₆  d₁₃,₂₃  d₁₃,₂₄  ...] ← відстані від лівого ліктя
            [d₁₄,₁₃  d₁₄,₁₅  d₁₄,₁₆  d₁₄,₂₃  d₁₄,₂₄  ...] ← відстані від правого ліктя
            [d₂₃,₂₄  d₂₃,₂₅  d₂₃,₂₆  d₂₃,₂₇  d₂₃,₂₈  ...] ← відстані між нижніми суглобами
            [...     ...     ...     ...     ...     ...]
```

де:
- d₁₁,₁₂ - відстань між лівим плечем (11) і правим плечем (12)
- d₁₁,₁₅ - відстань між лівим плечем (11) і лівим зап'ястям (15)
- d₁₂,₁₆ - відстань між правим плечем (12) і правим зап'ястям (16)
- d₁₃,₁₄ - відстань між лівим лікотьом (13) і правим лікотьом (14)
- d₂₃,₂₄ - відстань між лівим коліном (23) і правим коліном (24)

#### Матричний опис для варіанта 3 (Матриця кутів між суглобами):
Для пози Воїна II важливими є кути між:
- Плече-лікоть-зап'ястя (для аналізу горизонтального положення рук)
- Таз-коліно-щиколотка (для аналізу кута передньої ноги)
- Плече-таз-коліно (для аналізу вирівнювання тулуба)

Приклад часткової матриці кутів:
```
A_вояк_II = [α₁₁,₁₃,₁₅  α₁₂,₁₄,₁₆  ...] ← кути між плечем-лікоть-зап'ястя
            [α₂₃,₂₅,₂₇  α₂₄,₂₆,₂₈  ...] ← кути між тазом-коліном-щиколоткою
            [α₁₁,₂₃,₂₄  α₁₂,₂₃,₂₄  ...] ← кути між плечем-тазом-коліном
            [...        ...        ...]
```

де:
- α₁₁,₁₃,₁₅ - кут при лівому лікті (13) між лівим плечем (11) та лівим зап'ястям (15)
- α₁₂,₁₄,₁₆ - кут при правому лікті (14) між правим плечем (12) та правим зап'ястям (16)
- α₂₃,₂₅,₂₇ - кут при лівому коліні (23) між лівим пальцем ноги (25) та лівою п'яткою (27)
- α₁₁,₂₃,₂₄ - кут при лівому плечі (11) між лівим коліном (23) та правим коліном (24)

де αᵢ,ⱼ,ₖ - кут при суглобі j між суглобами i та k.

#### Приклади реальних значень кутів для правильної пози:
Для правильної виконаної пози Воїна II очікувані значення кутів можуть бути:
- α₁₁,₁₃,₁₅ ≈ 180° (лікоть повністю розгиняється при розведенні руки в сторону)
- α₁₂,₁₄,₁₆ ≈ 180° (правий лікоть повністю розгиняється при розведенні руки в сторону)
- α₂₃,₂₅,₂₇ ≈ 90° (переднє ліве коліно зігнуте під прямим кутом)
- α₁₁,₂₃,₂₄ ≈ 180° (лінія плечей паралельна лінії колін)

#### Приклад матриці кутів із реальними значеннями для пози Воїна II:
```
A_вояк_II = [180°  180°  180°  180°  180°  180°]
            [180°  180°  180°  180°  180°  180°]
            [180°  180°  180°  180°  180°  180°]
            [180°  180°  180°  180°  90°   180°]
            [180°  180°  180°  90°   180°  180°]
            [180°  180°  180°  180°  180°  180°]
```
де наведені значення є приблизними для правильної виконаної пози, а сама матриця містить кути між усіма можливими трійками суглобів. Зауважте, що повна матриця містила б 33³ = 35937 елементів (якщо враховувати всі можливі комбінації трійок суглобів), тому тут наведено лише фрагмент для ілюстрації структури.

#### Комбінована матриця для аналізу пози:
Для комплексного аналізу пози Воїна II можна створити комбіновану матрицю, що містить координати суглобів, відстані та кути:
```
C_вояк_II = [J_вояк_II    D_вояк_II    A_вояк_II]
```
де:
- J_вояк_II - матриця координат (33×3)
- D_вояк_II - матриця відстаней (33×33)
- A_вояк_II - матриця кутів (33×33×33) - спрощено для ілюстрації

Для аналізу конкретних аспектів пози можна використовувати підматриці, що містять лише необхідні параметри:
```
C_вояк_II_ноги = [J_ноги    D_ноги    A_ноги]
```
де J_ноги, D_ноги, A_ноги - підматриці, що містять параметри лише для суглобів ніг (таз, коліна, щиколотки).

#### Приклади підматриць:
Підматриця для ніг (ліве тазостегнове, праве тазостегнове, ліве коліно, праве коліно, ліва щиколотка, права щиколотка):
```
J_ноги = [x₂₃  y₂₃  z₂₃] ← ліве коліно (23)
         [x₂₄  y₂₄  z₂₄] ← праве коліно (24)
         [x₂₅  y₂₅  z₂₅] ← лівий палець ноги (25)
         [x₂₆  y₂₆  z₂₆] ← правий палець ноги (26)
         [x₂₇  y₂₇  z₂₇] ← ліва п'ятка (27)
         [x₂₈  y₂₈  z₂₈] ← права п'ятка (28)

D_ноги = [d₂₃,₂₄  d₂₃,₂₅  d₂₃,₂₆  d₂₃,₂₇  d₂₃,₂₈] ← відстані від лівого коліна
         [d₂₄,₂₃  d₂₄,₂₅  d₂₄,₂₆  d₂₄,₂₇  d₂₄,₂₈] ← відстані від правого коліна
         [d₂₅,₂₃  d₂₅,₂₄  d₂₅,₂₆  d₂₅,₂₇  d₂₅,₂₈] ← відстані від лівого пальця ноги
         [d₂₆,₂₃  d₂₆,₂₄  d₂₆,₂₅  d₂₆,₂₇  d₂₆,₂₈] ← відстані від правого пальця ноги
         [d₂₇,₂₃  d₂₇,₂₄  d₂₇,₂₅  d₂₇,₂₆  d₂₇,₂₈] ← відстані від лівої п'ятки
         [d₂₈,₂₃  d₂₈,₂₄  d₂₈,₂₅  d₂₈,₂₆  d₂₈,₂₇] ← відстані від правої п'ятки

A_ноги = [α₂₃,₂₅,₂₇  α₂₄,₂₆,₂₈  ...] ← кути при колінах
         [α₂₅,₂₃,₂₄  α₂₆,₂₃,₂₄  ...] ← кути при пальцях ноги
         [...        ...        ...]
```

### Поза Воїна III (Warrior III)

#### Текстовий опис вправи:
Поза Воїна III - це потужна балансуюча поза йоги, в якій:
- Тіло утворює пряму лінію, паралельну підлозі
- Одна нога витягнута назад, піднята в повітря
- Інша нога зігнута під кутом приблизно 90 градусів, з тілом уперед
- Руки витягнуті вперед, паралельно підлозі, продовжуючи лінію тіла
- Погляд направлений вниз або на передню руку
- Голова вирівняна з тулубом

#### Матричний опис для варіанта 1 (Матриця координат суглобів):
Для аналізу цієї пози важливими є наступні суглоби:
- Ноги: таз (ліве і праве стегно), коліна, кісточки
- Руки: плечі, лікті, зап'ястя, пальці
- Тулуб: хребет, груди, голова

Приклад скороченої матриці J для важливих суглобів:
```
J_вояк_III = [x₀   y₀   z₀  ] ← ніс (0)
             [x₁₁  y₁₁  z₁₁ ] ← ліве плече (11)
             [x₁₂  y₁₂  z₁₂ ] ← праве плече (12)
             [x₁₃  y₁₃  z₁₃ ] ← лівий лікоть (13)
             [x₁₄  y₁₄  z₁₄ ] ← правий лікоть (14)
             [x₁₅  y₁₅  z₁₅ ] ← ліве зап'ястя (15)
             [x₁₆  y₁₆  z₁₆ ] ← праве зап'ястя (16)
             [x₂₃  y₂₃  z₂₃ ] ← ліве коліно (23)
             [x₂₄  y₂₄  z₂₄ ] ← праве коліно (24)
             [x₂₅  y₂₅  z₂₅ ] ← лівий палець ноги (25)
             [x₂₆  y₂₆  z₂₆ ] ← правий палець ноги (26)
             [x₂₇  y₂₇  z₂₇ ] ← ліва п'ятка (27)
             [x₂₈  y₂₈  z₂₈ ] ← права п'ятка (28)
```

#### Матричний опис для варіанта 2 (Матриця відстаней між суглобами):
Для пози Воїна III важливими є відстані між:
- Плечима та руками (для аналізу симетрії положення рук)
- Тулубом та ногами (для аналізу балансу)
- Витягнутою та піднятою ногами (для аналізу вирівнювання)

Приклад часткової матриці відстаней:
```
D_вояк_III = [d₁₁,₁₂  d₁₁,₁₃  d₁₁,₁₄  d₁₁,₁₅  d₁₁,₁₆  ...] ← відстані від лівого плеча
             [d₁₂,₁₁  d₁₂,₁₃  d₁₂,₁₄  d₁₂,₁₅  d₁₂,₁₆  ...] ← відстані від правого плеча
             [d₁₃,₁₄  d₁₃,₁₅  d₁₃,₁₆  d₁₃,₂₃  d₁₃,₂₄  ...] ← відстані від лівого ліктя
             [d₁₄,₁₃  d₁₄,₁₅  d₁₄,₁₆  d₁₄,₂₃  d₁₄,₂₄  ...] ← відстані від правого ліктя
             [d₂₃,₂₄  d₂₃,₂₅  d₂₃,₂₆  d₂₃,₂₇  d₂₃,₂₈  ...] ← відстані між нижніми суглобами
             [...     ...     ...     ...     ...     ...]
```

де:
- d₁₁,₁₂ - відстань між лівим плечем (11) і правим плечем (12)
- d₁₁,₁₅ - відстань між лівим плечем (11) і лівим зап'ястям (15)
- d₁₂,₁₆ - відстань між правим плечем (12) і правим зап'ястям (16)
- d₁₃,₁₄ - відстань між лівим лікотьом (13) і правим лікотьом (14)
- d₂₃,₂₄ - відстань між лівим коліном (23) і правим коліном (24)

#### Матричний опис для варіанта 3 (Матриця кутів між суглобами):
Для пози Воїна III важливими є кути між:
- Плече-лікоть-зап'ястя (для аналізу положення рук)
- Таз-коліно-щиколотка (для аналізу положення передньої ноги)
- Плече-таз-коліно (для аналізу вирівнювання тіла)
- Таз-коліно-палець ноги (для аналізу положення задньої ноги)

Приклад часткової матриці кутів:
```
A_вояк_III = [α₁₁,₁₃,₁₅  α₁₂,₁₄,₁₆  ...] ← кути між плечем-лікоть-зап'ястя
             [α₂₃,₂₅,₂₇  α₂₄,₂₆,₂₈  ...] ← кути між тазом-коліном-щиколоткою
             [α₁₁,₂₃,₂₄  α₁₂,₂₃,₂₄  ...] ← кути між плечем-тазом-коліном
             [...        ...        ...]
```

де:
- α₁₁,₁₃,₁₅ - кут при лівому лікті (13) між лівим плечем (11) та лівим зап'ястям (15)
- α₁₂,₁₄,₁₆ - кут при правому лікті (14) між правим плечем (12) та правим зап'ястям (16)
- α₂₃,₂₅,₂₇ - кут при лівому коліні (23) між лівим пальцем ноги (25) та лівою п'яткою (27)
- α₁₁,₂₃,₂₄ - кут при лівому плечі (11) між лівим коліном (23) та правим коліном (24)

де αᵢ,ⱼ,ₖ - кут при суглобі j між суглобами i та k.

#### Приклади реальних значень кутів для правильної пози:
Для правильної виконаної пози Воїна III очікувані значення кутів можуть бути:
- α₁₁,₁₃,₁₅ ≈ 180° (лікоть повністю розгиняється при витягуванні руки вперед)
- α₁₂,₁₄,₁₆ ≈ 180° (правий лікоть повністю розгиняється при витягуванні руки вперед)
- α₂₃,₂₅,₂₇ ≈ 180° (лінія тіла від тазу до п'ятки передньої ноги утворює пряму лінію)
- α₁₁,₂₃,₂₄ ≈ 90° (кут між тулубом і передньою ногою, що утворює "L"-подібну форму)
- α₂₄,₂₆,₂₈ ≈ 180° (лінія піднятої задньої ноги утворює пряму лінію з тілом)

#### Приклад матриці кутів із реальними значеннями для пози Воїна III:
```
A_вояк_III = [180°  180°  180°  180°  180°  180°]
             [180°  180°  180°  180°  180°  180°]
             [180°  180°  180°  180°  180°  180°]
             [180°  180°  180°  180°  90°   180°]
             [180°  180°  180°  90°   180°  180°]
             [180°  180°  180°  180°  180°  180°]
```
де наведені значення є приблизними для правильної виконаної пози, а сама матриця містить кути між усіма можливими трійками суглобів. Зауважте, що повна матриця містила б 33³ = 35937 елементів (якщо враховувати всі можливі комбінації трійок суглобів), тому тут наведено лише фрагмент для ілюстрації структури.

#### Комбінована матриця для аналізу пози:
Для комплексного аналізу пози Воїна III можна створити комбіновану матрицю, що містить координати суглобів, відстані та кути:
```
C_вояк_III = [J_вояк_III    D_вояк_III    A_вояк_III]
```
де:
- J_вояк_III - матриця координат (33×3)
- D_вояк_III - матриця відстаней (33×33)
- A_вояк_III - матриця кутів (33×33×33) - спрощено для ілюстрації

Для аналізу конкретних аспектів пози можна використовувати підматриці, що містять лише необхідні параметри:
```
C_вояк_III_баланс = [J_баланс    D_баланс    A_баланс]
```
де J_баланс, D_баланс, A_баланс - підматриці, що містять параметри для аналізу балансу тіла (таз, коліна, плечі).

#### Приклади підматриць:
Підматриця для аналізу балансу (плечі, таз, коліна):
```
J_баланс = [x₁₁  y₁₁  z₁₁] ← ліве плече (11)
           [x₁₂  y₁₂  z₁₂] ← праве плече (12)
           [x₂₃  y₂₃  z₂₃] ← ліве коліно (23)
           [x₂₄  y₂₄  z₂₄] ← праве коліно (24)

D_баланс = [d₁₁,₁₂  d₁₁,₂₃  d₁₁,₂₄  d₁₂,₂₃  d₁₂,₂₄] ← відстані між ключовими суглобами
           [d₂₃,₁₁  d₂₃,₁₂  d₂₃,₂₄  d₂₄,₁₁  d₂₄,₁₂]
           [d₂₄,₁₁  d₂₄,₁₂  d₂₄,₂₃  d₂₃,₁₁  d₂₃,₁₂]

A_баланс = [α₁₁,₁₂,₂₃  α₁₁,₁₂,₂₄  ...] ← кути між суглобами
           [α₁₂,₁₁,₂₃  α₁₂,₁₁,₂₄  ...]
           [...        ...        ...]
```

## Порівняльний аналіз 2D та 3D варіантів аналізу поз

Для кожної з поз "Воїна" надамо два варіанти аналізу: 2D-координати та 3D-координати з ваговим коефіцієнтом, а також порівняння точності розпізнавання.

### Поза "Воїн I"

#### 2D-варіант аналізу:
```
J_вояк_I_2D = [x₁₁  y₁₁] ← ліве плече (11)
              [x₁₂  y₁₂] ← праве плече (12)
              [x₁₃  y₁₃] ← лівий лікоть (13)
              [x₁₄  y₁₄] ← правий лікоть (14)
              [x₁₅  y₁₅] ← ліве зап'ястя (15)
              [x₁₆  y₁₆] ← праве зап'ястя (16)
              [x₂₃  y₂₃] ← ліве коліно (23)
              [x₂₄  y₂₄] ← праве коліно (24)
              [x₂₅  y₂₅] ← лівий палець ноги (25)
              [x₂₆  y₂₆] ← правий палець ноги (26)
              [x₂₇  y₂₇] ← ліва п'ятка (27)
              [x₂₈  y₂₈] ← права п'ятка (28)
```

#### 3D-варіант аналізу:
```
J_вояк_I_3D = [x₁₁  y₁₁  wz₁₁] ← ліве плече (11)
              [x₁₂  y₁₂  wz₁₂] ← праве плече (12)
              [x₁₃  y₁₃  wz₁₃] ← лівий лікоть (13)
              [x₁₄  y₁₄  wz₁₄] ← правий лікоть (14)
              [x₁₅  y₁₅  wz₁₅] ← ліве зап'ястя (15)
              [x₁₆  y₁₆  wz₁₆] ← праве зап'ястя (16)
              [x₂₃  y₂₃  wz₂₃] ← ліве коліно (23)
              [x₂₄  y₂₄  wz₂₄] ← праве коліно (24)
              [x₂₅  y₂₅  wz₂₅] ← лівий палець ноги (25)
              [x₂₆  y₂₆  wz₂₆] ← правий палець ноги (26)
              [x₂₇  y₂₇  wz₂₇] ← ліва п'ятка (27)
              [x₂₈  y₂₈  wz₂₈] ← права п'ятка (28)
```

де w - коефіцієнт довіри до z-координати (наприклад, w = 0.5).

#### Порівняння точності розпізнавання:
- 2D-варіант: Висока точність для визначення положення на площині (0.95)
- 3D-варіант: Висока точність для визначення просторової орієнтації (0.9)
- Рівень довіри до якості розпізнавання: Високий (0.9)

### Поза "Воїн II"

#### 2D-варіант аналізу:
```
J_вояк_II_2D = [x₁₁  y₁₁] ← ліве плече (11)
               [x₁₂  y₁₂] ← праве плече (12)
               [x₁₃  y₁₃] ← лівий лікоть (13)
               [x₁₄  y₁₄] ← правий лікоть (14)
               [x₁₅  y₁₅] ← ліве зап'ястя (15)
               [x₁₆  y₁₆] ← праве зап'ястя (16)
               [x₂₃  y₂₃] ← ліве коліно (23)
               [x₂₄  y₂₄] ← праве коліно (24)
               [x₂₅  y₂₅] ← лівий палець ноги (25)
               [x₂₆  y₂₆] ← правий палець ноги (26)
               [x₂₇  y₂₇] ← ліва п'ятка (27)
               [x₂₈  y₂₈] ← права п'ятка (28)
```

#### 3D-варіант аналізу:
```
J_вояк_II_3D = [x₁₁  y₁₁  wz₁₁] ← ліве плече (11)
               [x₁₂  y₁₂  wz₁₂] ← праве плече (12)
               [x₁₃  y₁₃  wz₁₃] ← лівий лікоть (13)
               [x₁₄  y₁₄  wz₁₄] ← правий лікоть (14)
               [x₁₅  y₁₅  wz₁₅] ← ліве зап'ястя (15)
               [x₁₆  y₁₆  wz₁₆] ← праве зап'ястя (16)
               [x₂₃  y₂₃  wz₂₃] ← ліве коліно (23)
               [x₂₄  y₂₄  wz₂₄] ← праве коліно (24)
               [x₂₅  y₂₅  wz₂₅] ← лівий палець ноги (25)
               [x₂₆  y₂₆  wz₂₆] ← правий палець ноги (26)
               [x₂₇  y₂₇  wz₂₇] ← ліва п'ятка (27)
               [x₂₈  y₂₈  wz₂₈] ← права п'ятка (28)
```

де w - коефіцієнт довіри до z-координати (наприклад, w = 0.6).

#### Порівняння точності розпізнавання:
- 2D-варіант: Висока точність для визначення положення на площині (0.92)
- 3D-варіант: Висока точність для визначення просторової орієнтації (0.88)
- Рівень довіри до якості розпізнавання: Високий (0.85)

### Поза "Воїн III"

#### 2D-варіант аналізу:
```
J_вояк_III_2D = [x₀   y₀ ] ← ніс (0)
                [x₁₁  y₁₁] ← ліве плече (11)
                [x₁₂  y₁₂] ← праве плече (12)
                [x₁₃  y₁₃] ← лівий лікоть (13)
                [x₁₄  y₁₄] ← правий лікоть (14)
                [x₁₅  y₁₅] ← ліве зап'ястя (15)
                [x₁₆  y₁₆] ← праве зап'ястя (16)
                [x₂₃  y₂₃] ← ліве коліно (23)
                [x₂₄  y₂₄] ← праве коліно (24)
                [x₂₅  y₂₅] ← лівий палець ноги (25)
                [x₂₆  y₂₆] ← правий палець ноги (26)
                [x₂₇  y₂₇] ← ліва п'ятка (27)
                [x₂₈  y₂₈] ← права п'ятка (28)
```

#### 3D-варіант аналізу:
```
J_вояк_III_3D = [x₀   y₀   wz₀  ] ← ніс (0)
                [x₁₁  y₁₁  wz₁₁ ] ← ліве плече (11)
                [x₁₂  y₁₂  wz₁₂ ] ← праве плече (12)
                [x₁₃  y₁₃  wz₁₃ ] ← лівий лікоть (13)
                [x₁₄  y₁₄  wz₁₄ ] ← правий лікоть (14)
                [x₁₅  y₁₅  wz₁₅ ] ← ліве зап'ястя (15)
                [x₁₆  y₁₆  wz₁₆ ] ← праве зап'ястя (16)
                [x₂₃  y₂₃  wz₂₃ ] ← ліве коліно (23)
                [x₂₄  y₂₄  wz₂₄ ] ← праве коліно (24)
                [x₂₅  y₂₅  wz₂₅ ] ← лівий палець ноги (25)
                [x₂₆  y₂₆  wz₂₆ ] ← правий палець ноги (26)
                [x₂₇  y₂₇  wz₂₇ ] ← ліва п'ятка (27)
                [x₂₈  y₂₈  wz₂₈ ] ← права п'ятка (28)
```

де w - коефіцієнт довіри до z-координати (наприклад, w = 0.7).

#### Порівняння точності розпізнавання:
- 2D-варіант: Висока точність для визначення положення на площині (0.85)
- 3D-варіант: Середня точність для визначення просторової орієнтації (0.75)
- Рівень довіри до якості розпізнавання: Середній (0.7)

### Вагове представлення для врахування неточностей z-координати

Для більш точного аналізу поз з урахуванням обмежень вебкамери можна використовувати модифіковану формулу відстані:

```
d = √[(x₂-x₁)² + (y₂-y₁)² + w(z₂-z₁)²]
```

де w - ваговий коефіцієнт для z-координати (w < 1), що зменшує вплив неточностей визначення глибини.

### Висновок щодо приоритетності поз

З точки зору максимальної точності розпізнавання з урахуванням обмежень вебкамери:

1. **Поза "Воїн I"** - має найвищий рівень довіри (0.9) через оптимальне розташування тіла щодо камери, що забезпечує найкраще представлення в 2D-просторі з мінімальним впливом неточностей z-координати.

2. **Поза "Воїн II"** - має високий рівень довіри (0.85) через хороший огляд суглобів при боковому розташуванні.

3. **Поза "Воїн III"** - має середній рівень довіри (0.7) через складність визначення просторової орієнтації тіла при паралельному положенні до підлоги.

### Порівняння 2D та 3D варіантів

- **2D-варіант** забезпечує вищу точність для всіх трьох поз, оскільки x та y координати визначаються з більшою точністю
- **3D-варіант** додає інформацію про глибину, але знижує загальну точність через неточності в z-координаті
- Для **"Воїна I"** різниця між 2D та 3D варіантами найменша (0.95 vs 0.9)
- Для **"Воїна III"** різниця між 2D та 3D варіантами найбільша (0.85 vs 0.75)

## Висновок

Використання матриць для представлення суглобів людини в додатку "Віртуальна Йога" дозволяє застосовувати методи лінійної алгебри для аналізу та порівняння поз. Кожен з розглянутих варіантів має свої переваги та недоліки, і для практичної реалізації може бути використана комбінація цих підходів залежно від конкретної задачі аналізу йога-пози. Наведені приклади для поз "Воїн I", "Воїн II" та "Воїн III" демонструють, як можна застосовувати ці математичні моделі для конкретних йога-вправ. Особливо важливо враховувати обмеження вебкамери щодо визначення z-координати при аналізі поз, що впливає на рівень довіри до результатів розпізнавання. Порівняння 2D та 3D варіантів показує, що для більшості застосувань 2D-аналіз забезпечує вищу точність, але 3D-аналіз може бути корисним для визначення просторової орієнтації тіла.