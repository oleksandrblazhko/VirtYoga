# Лекція 7: Рівняння прямої у просторі для аналізу вирівнювання

**Назва лекції:** «Рівняння прямої у просторі: через дві точки, загальні, канонічні. Кут між площиною і прямою у просторі. Визначення координат точки перетину прямої та площини».

**Назва практичного заняття:** «Різні види рівнянь прямої у просторі. Кут між прямою і площиною. Точка перетину прямої у просторі і площини».

**Пов'язаний розділ з `Docs\Lecture_1_3.txt`:** 3.4 "Пряма у просторі (в R3)".

---

### Обґрунтування користі для IT-проєкту

Рівняння прямої у тривимірному просторі є найбільш точним способом моделювання кісток та кінцівок людини. Це дозволяє перейти від 2D-проекцій до повноцінного 3D-аналізу, що є критично важливим для правильної оцінки складних поз.
-   **Точне моделювання:** Кінцівки та хребет ідеально описуються як відрізки прямих у 3D. Це дозволяє точно перевіряти, чи є частина тіла "прямою".
-   **Аналіз відносно оточення:** За допомогою рівнянь прямої та площини можна аналізувати положення тіла відносно підлоги (наприклад, чи паралельна спина підлозі, чи перпендикулярна гомілка).
-   **Кількісна оцінка помилок:** Методи аналітичної геометрії дозволяють не просто констатувати факт помилки, а й обчислити її величину (наприклад, "ваші стегна провисають на 10 см").

---

### Зв'язок математичної формалізації із описом IT-проєкту

| Елемент опису IT-проєкту | Математична формалізація (з розділу 3.4) |
| :--- | :--- |
| Кінцівка або вісь тіла у 3D | **Пряма у просторі**, що проходить через два суглоби. Описується канонічним рівнянням: `(x-x₁)/(x₂-x₁) = (y-y₁)/(y₂-y₁) = (z-z₁)/(z₂-z₁)`. |
| Перевірка, чи є спина/нога/рука прямою | Перевірка, чи лежить третій контрольний суглоб на **прямій**, визначеній двома іншими суглобами. |
| Паралельність спини або ноги до підлоги | Обчислення **кута між прямою** (вісь тіла) **та площиною** (підлога). Цільовий кут дорівнює 0. |
| Перпендикулярність опорної ноги до підлоги | Обчислення **кута між прямою** (опорна нога) **та площиною** (підлога). Цільовий кут дорівнює 90°. |

---

### Приклади математичного опису IT-проєкту

**1. Моделювання кінцівки як прямої у просторі:**

Кінцівка користувача (наприклад, плече) визначається положенням плечового суглоба `P_s(x₁, y₁, z₁)` та ліктьового суглоба `P_e(x₂, y₂, z₂)`.
-   **Напрямний вектор** цієї прямої: `s = P_e - P_s = (x₂-x₁, y₂-y₁, z₂-z₁)`.
-   **Канонічне рівняння** осі кінцівки: `(x-x₁)/s.x = (y-y₁)/s.y = (z-z₁)/s.z`.
Це рівняння є математичною моделлю осі руки в просторі.

**2. Перевірка вирівнювання у позі "Планка":**

У цій позі тіло від плечей до щиколоток має утворювати пряму лінію.
-   **Крок 1: Визначити лінію тіла.** Програма будує пряму `L` у просторі, що проходить через центр плечей `P_shoulders` та центр щиколоток `P_ankles`.
-   **Крок 2: Перевірити положення стегон.** Програма бере координати центру тазу `P_hips`.
-   **Крок 3: Аналіз.** Програма перевіряє, чи належить точка `P_hips` прямій `L`. Якщо ні, обчислюється відстань від точки до прямої.
-   **Рекомендація:** Ця відстань кількісно показує, наскільки стегна провисають або підняті. "Ваші стегна провисають на 8 см. Підніміть таз, щоб вирівняти тіло".

**3. Аналіз пози "Воїн III" (кут між прямою та площиною):**

У цій позі корпус і піднята нога мають бути паралельні підлозі.
-   **Крок 1: Визначити площину підлоги.** Програма приймає підлогу за площину `z=0`. Її нормальний вектор `N_floor = (0, 0, 1)`.
-   **Крок 2: Визначити лінії тіла.**
    -   Лінія піднятої ноги `L_leg` (з напрямним вектором `s_leg`).
    -   Лінія корпусу `L_torso` (з напрямним вектором `s_torso`).
-   **Крок 3: Обчислити кути.** Програма обчислює кут `α` між прямою (напрямний вектор `s`) і площиною (нормаль `N`) за формулою `sin(α) = |s · N| / (|s| · |N|)`.
    -   Кут між `L_leg` та площиною підлоги. Цільове значення `α ≈ 0°`.
    -   Кут між `L_torso` та площиною підлоги. Цільове значення `α ≈ 0°`.
-   **Рекомендація:** "Ваша піднята нога нахилена до підлоги під кутом 20°. Підніміть її вище." або "Вирівняйте корпус паралельно до підлоги."
