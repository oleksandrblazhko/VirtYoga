# Лекція 28: Умовні екстремуми та оптимізація поз з обмеженнями

**Назва лекції:** «Поняття про умовний екстремум. Метод підстановки знаходження умовного екстремуму. Метод Лагранжа. Знаходження найбільшого і найменшого значень функції в області».

**Назва практичного заняття:** «Екстремум функції 2-х змінних. Умовний екстремум. Найбільше та найменше значення функції в обмеженій області. Метод найменших квадратів».

**Пов'язаний розділ з `Docs\Lecture_1_11.txt`:** 14.2 "Найменше та найбільше значення функції на замкненій області", 14.3 "Умовні екстремуми ФКЗ. Методи відшукання", 14.4 "Поняття про емпіричні формули, метод найменших квадратів".

---

### Обґрунтування користі для IT-проєкту

Реальні йога-пози та фізичні вправи часто передбачають **обмеження**. Наприклад, "максимально розтягніться, тримаючи спину прямою" або "глибоко присядьте, але не відривайте п'яти від підлоги". Теорія **умовних екстремумів** та **метод Лагранжа** (розділ 14.3) надають математичний апарат для розв'язання таких задач оптимізації з обмеженнями. Крім того, **метод найменших квадратів** (розділ 14.4) є фундаментальним для калібрування системи та адаптації її під індивідуальні особливості користувача.

-   **Реалістичне моделювання:** Дозволяє моделювати цілі та обмеження вправ одночасно, роблячи аналіз більш реалістичним.
-   **Оптимізація з безпекою:** Програма може шукати оптимальне виконання вправи (наприклад, максимальний розтяг), одночасно дотримуючись обмежень, що гарантують безпеку (наприклад, "кут в коліні не менше 90 градусів").
-   **Калібрування та персоналізація:** Метод найменших квадратів дозволяє побудувати математичну модель тіла користувача на основі виміряних даних, що робить систему точною для кожного індивідуума.

---

### Зв'язок математичної формалізації із описом IT-проєкту

| Елемент опису IT-проєкту | Математична формалізація (з розділів 14.2, 14.3, 14.4) |
| :--- | :--- |
| Оптимізація параметрів пози з додатковими вимогами | **Умовний екстремум функції багатьох змінних**. |
| "Тримайте спину прямою" (обмеження) | Функція-обмеження `g(θ_spine) = 0`. |
| "Максимально розтягніться, не прогинаючи поперек" | Об'єктивна функція `f(θ_stretch)` максимізується за умови `g(θ_back) = 0`. |
| Метод пошуку таких оптимальних позицій | **Метод Лагранжа** (розділ 14.3). |
| Пошук "найкращого" або "найгіршого" виконання за весь час | **Найбільше та найменше значення функції на замкненій області** (розділ 14.2). |
| Побудова моделі тіла користувача | **Метод найменших квадратів** (розділ 14.4) для побудови емпіричних формул. |

---

### Приклади математичного опису IT-проєкту

**1. Максимальний розтяг з прямою спиною (Метод Лагранжа):**

-   **Завдання:** Користувач нахиляється вперед, намагаючись дотягнутися до стоп, але при цьому його спина має залишатися прямою.
-   **Модель:**
    -   **Цільова функція `f` (для максимізації):** Це може бути від'ємна відстань між пальцями рук та стопами, або функція розтягу підколінних сухожиль `f(θ_hips, θ_spine_flex)`.
    -   **Функція-обмеження `g`:** Пряма спина моделюється як `g(θ_spine_flex) = θ_spine_flex - 0 = 0` (тобто кут згинання хребта дорівнює 0).
-   **Аналіз:** Програма застосовує **метод Лагранжа** (розділ 14.3). Вона будує функцію Лагранжа `L = f(θ_hips, θ_spine_flex) + λ * g(θ_spine_flex)`.
-   **Результат:** Розв'язавши систему рівнянь, програма знаходить оптимальний кут нахилу в тазостегновому суглобі, який дає максимальний розтяг *за умови прямої спини*.
-   **Рекомендація:** "Продовжуйте нахилятися вперед, тримаючи спину рівною. Ваше обмеження на спину виконано!".

**2. Оцінка загальної якості вправи (Глобальні екстремуми, розділ 14.2):**

-   **Завдання:** Проаналізувати виконання вправи "Присідання" за час `[t₁, t₂]`.
-   **Модель:** Програма обчислює "функцію якості" `Q(t)`, яка залежить від глибини присідання, швидкості та плавності руху. Ця функція неперервна на `[t₁, t₂]`.
-   **Аналіз:** Завдяки теоремам про найбільше та найменше значення (розділ 14.2) програма може знайти абсолютний мінімум та максимум якості `min Q(t)` та `max Q(t)` за весь час виконання вправи.
-   **Результат:** Це дозволяє дати загальну оцінку: "Ваше присідання було достатньо глибоким (мінімум якості)", або "Найкращу якість руху ви продемонстрували в момент часу `t`".

**3. Персоналізація програми (Метод найменших квадратів, розділ 14.4):**

-   **Завдання:** Побудувати модель пропорцій тіла користувача (наприклад, довжину кінцівок) для точнішого відстеження.
-   **Збір даних:** Під час калібрування користувач приймає кілька відомих поз, і програма вимірює координати суглобів.
-   **Модель:** Програма використовує "емпіричну формулу" (наприклад, лінійну) для залежності між виміряними координатами та відомими довжинами кінцівок. `довжина = a₀ + a₁*виміряна_координата`.
-   **Аналіз:** Програма застосовує **метод найменших квадратів** (розділ 14.4) для знаходження оптимальних параметрів `a₀` та `a₁`, які мінімізують суму квадратів відхилень між виміряними та модельними довжинами.
-   **Результат:** Програма отримує персоналізовану математичну модель тіла користувача, яка враховує його унікальні пропорції, що значно підвищує точність відстеження та рекомендацій.