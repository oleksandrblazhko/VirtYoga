# Лекція 4: Вектори та їх роль у аналізі поз в "WebcamPhysExercise"

**Назва лекції:** «Вектори. Означення вектору як напрямленого відрізку. Лінійні операції над векторами. Скалярний добуток векторів. Властивості скалярного добутку. Косинус кута між векторами. Направляючі косинуси».

**Назва практичного заняття:** «Лінійні операції над векторами. Скалярний добуток векторів, його властивості і застосування».

**Пов'язані розділи з `Docs\Lecture_1_2.txt`:** 2.1 "Вектори: основні означення, лінійні операції" та 2.2 (частково) "Скалярний добуток двох векторів".

---

### Обґрунтування користі для IT-проєкту

Вектори є природним способом математичного опису кінцівок та їх орієнтації у просторі. Розуміння векторної алгебри є ключовим для реалізації основного функціоналу проєкту "WebcamPhysExercise":
-   **Представлення частин тіла:** Кінцівки (наприклад, від плеча до ліктя) ідеально моделюються як вектори.
-   **Аналіз кутів:** Багато поз в йозі визначаються саме кутами між частинами тіла (наприклад, "кут в коліні має бути 90 градусів"). Скалярний добуток, описаний в розділі 2.2, надає прямий та ефективний метод для обчислення цих кутів.
-   **Аналіз орієнтації:** Властивості векторів дозволяють визначити, чи є кінцівка паралельною або перпендикулярною до підлоги.

---

### Зв'язок математичної формалізації із описом IT-проєкту

| Елемент опису IT-проєкту | Математична формалізація (з розділів 2.1, 2.2) |
| :--- | :--- |
| Координати суглобів `(x,y,z)` | **Радіус-вектори** точок у просторі. Наприклад, `P_shoulder`, `P_elbow`. |
| Кінцівки (плече, передпліччя) | **Вектори**, що є різницею радіус-векторів суглобів. Наприклад, `V_forearm = P_wrist - P_elbow`. (Лінійні операції над векторами). |
| Кут у суглобі (напр. в лікті) | **Кут між двома векторами**, що представляють кінцівки. Обчислюється через **скалярний добуток** за формулою (2.2.7): `cos(φ) = (a·b) / (|a||b|)`. |
| Перевірка "прямої спини" або "прямої руки" | Перевірка **колінеарності** трьох точок (суглобів), що еквівалентно умові пропорційності координат векторів, що їх з'єднують (формула 2.2.9). |

---

### Приклади математичного опису IT-проєкту

**1. Представлення кінцівок як векторів:**

Програма отримує від Mediapipe координати суглобів.
-   `P_shoulder = (x1, y1, z1)`
-   `P_elbow = (x2, y2, z2)`
-   `P_wrist = (x3, y3, z3)`

Вектор, що представляє плече (від плеча до ліктя), згідно з розділом 2.1:
`V_upper_arm = P_elbow - P_shoulder = (x2-x1, y2-y1, z2-z1)`

Вектор, що представляє передпліччя (від ліктя до зап'ястя):
`V_forearm = P_wrist - P_elbow = (x3-x2, y3-y2, z3-z2)`

**2. Обчислення кута в суглобі (ключова функція):**

Однією з головних перевірок у йога-асанах є кут у суглобі. Наприклад, у позі "Воїн II" кут у передньому коліні має бути близьким до 90°.

-   **Крок 1: Визначити вектори.**
    -   Вектор стегна: `V_thigh = P_knee - P_hip`
    -   Вектор гомілки: `V_shin = P_ankle - P_knee`

-   **Крок 2: Обчислити їх скалярний добуток (формула 2.2.6).**
    `dot_product = V_thigh · V_shin = (V_thigh.x * V_shin.x) + (V_thigh.y * V_shin.y) + (V_thigh.z * V_shin.z)`

-   **Крок 3: Обчислити їх довжини (модулі) (формула 2.1.8).**
    `|V_thigh| = sqrt(V_thigh.x² + V_thigh.y² + V_thigh.z²)`
    `|V_shin| = sqrt(V_shin.x² + V_shin.y² + V_shin.z²)`

-   **Крок 4: Знайти косинус кута (формула 2.2.7).**
    `cos_theta = dot_product / (|V_thigh| * |V_shin|)`

-   **Крок 5: Знайти кут.**
    `theta = arccos(cos_theta)`

Програма порівнює `theta` з еталонним значенням і надає рекомендацію: "Ваш кут в коліні зараз 115°. Зігніть ногу сильніше".

**3. Перевірка перпендикулярності (умова ортогональності):**

У деяких позах руки мають бути перпендикулярні до тулуба.
-   Вектор тулуба: `V_torso = P_shoulder_mid - P_hip_mid`
-   Вектор руки: `V_arm = P_wrist - P_shoulder`
-   Програма перевіряє умову ортогональності (формула 2.2.8): `V_torso · V_arm ≈ 0`.
-   Якщо добуток не близький до нуля, програма може дати пораду: "Підніміть руку вище, щоб вона була перпендикулярна до тулуба".
