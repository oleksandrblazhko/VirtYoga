# Лекція 8: Трансформація координат та аналіз траєкторій

**Назва лекції:** «Перетворення координат на площині. Канонічні рівняння кола, еліпса, гіперболи, параболи».

**Назва практичного заняття:** «Канонічні рівняння найпростіших ліній другого порядку».

**Пов'язаний розділ з `Docs\Lecture_1_3.txt`:** 3.2 "Криві другого порядку (К2П)".

---

### Обґрунтування користі для IT-проєкту

Ця лекція надає два потужних інструменти для проєкту "WebcamPhysExercise":
1.  **Перетворення координат:** Це дозволяє зробити додаток "розумнішим" та більш гнучким. Аналіз поз не повинен залежати від того, де саме перед камерою стоїть людина і під яким кутом. Перенесення та поворот системи координат дозволяють створити "персональну" систему відліку для користувача, що значно спрощує подальші обчислення та робить підказки інтуїтивно зрозумілими.
2.  **Рівняння кривих 2-го порядку:** Хоча йога переважно статична, багато фізичних вправ є динамічними. Рівняння кола та еліпса дозволяють аналізувати та направляти кругові рухи (напр., обертання руками або ногами), оцінюючи їх якість. Рівняння параболи може бути використане для аналізу стрибків.

---

### Зв'язок математичної формалізації із описом IT-проєкту

| Елемент опису IT-проєкту | Математична формалізація (з розділу 3.2) |
| :--- | :--- |
| Незалежність від позиції користувача | **Паралельне перенесення осей координат** (формули 3.2.17). Програма може перенести початок координат в центр ваги користувача. |
| Незалежність від кута повороту користувача | **Поворот осей координат** (формули 3.2.18). Програма може повернути систему координат так, щоб вісь X була паралельна плечам користувача. |
| Динамічні вправи (кругові рухи) | **Канонічне рівняння кола** `(x-x₀)² + (y-y₀)² = R²` (формула 3.1.2) або **еліпса** (формула 3.2.5). Програма може перевіряти, чи рухається суглоб по заданій траєкторії. |
| Аналіз стрибків (розширення функціоналу) | **Канонічне рівняння параболи** `x² = 2py` (формула 3.2.16). Траєкторія центру ваги під час стрибка описується параболою. |

---

### Приклади математичного опису IT-проєкту

**1. Створення персональної системи координат (Перетворення координат):**

Перед початком вправи програма виконує калібрування.
-   **Крок 1: Паралельне перенесення.** Програма знаходить центр між стопами користувача `P_origin(x₀, y₀, z₀)`. Всі координати суглобів `(x, y, z)` переводяться в нову систему `(X, Y, Z)` за формулами `X = x - x₀`, `Y = y - y₀`, `Z = z - z₀`. Тепер початок координат знаходиться рівно під користувачем.
-   **Крок 2: Поворот осей.** Програма визначає вектор між плечима `V_sh`. Обчислюється кут `α`, який цей вектор утворює з горизонталлю камери. Вся система координат повертається на кут `-α` навколо осі Z. Тепер нова вісь `X'` завжди паралельна плечам користувача.
-   **Результат:** Усі подальші обчислення відбуваються у цій зручній системі координат, де "вперед", "вліво", "вправо" відповідають напрямкам тіла користувача, а не камери.

**2. Аналіз кругових рухів рукою (Рівняння кола):**

Вправа: "Зробіть 5 великих повільних кіл прямою рукою".
-   **Крок 1:** Програма фіксує плечовий суглоб як очікуваний центр кола `C(x₀, y₀, z₀)`.
-   **Крок 2:** Протягом руху програма збирає координати зап'ястя `P(t)`.
-   **Крок 3: Аналіз.** Для кожної точки `P(t)` програма:
    1.  Перевіряє, чи лежать точки `C` та `P(t)` і лікоть на одній прямій (чи є рука прямою).
    2.  Обчислює відстань `R(t) = |P(t) - C|`.
    3.  Знаходить середній радіус `R_avg` та відхилення.
-   **Рекомендація:** "Ваш радіус руху змінюється. Намагайтеся тримати руку на постійній відстані від плеча." або "Чудово, ви описуєте ідеальне коло!".

**3. Аналіз траєкторії стрибка (Рівняння параболи):**

Для розширеного функціоналу "Фізичні вправи". Вправа: "Стрибок у довжину".
-   Програма відстежує центр ваги користувача `P_cg(t)`.
-   Знаходить найвищу точку траєкторії (вершину параболи) і переносить туди початок координат.
-   Апроксимує (підбирає) точки траєкторії канонічним рівнянням параболи `x² = -2py`.
-   **Аналіз:** Параметр `p` характеризує "крутизну" параболи і залежить від початкової швидкості.
-   **Результат:** Програма може оцінити висоту і дальність стрибка, а також надати кількісну оцінку його якості.
